{"ast":null,"code":"import axios from \"axios\";\nimport Cookies from 'js-cookie';\nconst API_URL = \"http://localhost:3000\";\n\nclass AuthService {\n  login(username, password) {\n    /*return axios\n    .post(API_URL + \"/login\", { username, password })\n    .then((response) => {\n    if (response.data.accessToken) {\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n    }\n    return response.data;\n    });*/\n    const options = {\n      method: 'post',\n      credentials: 'include',\n      headers: {\n        'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8'\n      },\n      body: `username=${username}&passwd=${password}`\n    };\n    fetch(url + \"/login\", options).then(response => {\n      if (!response.ok) {\n        if (response.status === 404) {\n          alert('User not found, please retry');\n        }\n\n        if (response.status === 401) {\n          alert('Invalid credentials');\n        }\n      }\n\n      return response;\n    }).then(response => response.json()).then(data => {\n      if (data.success) {\n        Cookies.set('signedin', true, {\n          expires: 1\n        });\n        return data.success.trim();\n      }\n    });\n  }\n\n  logout() {\n    localStorage.removeItem(\"user\");\n  }\n\n  register(username, email, password) {\n    return axios.post(API_URL + \"signup\", {\n      username,\n      email,\n      password\n    });\n  }\n\n}\n\nexport default new AuthService();","map":{"version":3,"sources":["/home/natalia/Documentos/MCSW/Tareas/Sem03/Front_MCSW/cliente/src/services/auth/AuthService.js"],"names":["axios","Cookies","API_URL","AuthService","login","username","password","options","method","credentials","headers","body","fetch","url","then","response","ok","status","alert","json","data","success","set","expires","trim","logout","localStorage","removeItem","register","email","post"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,MAAMC,OAAO,GAAG,uBAAhB;;AAEA,MAAMC,WAAN,CAAkB;AAEhBC,EAAAA,KAAK,CAACC,QAAD,EAAWC,QAAX,EAAqB;AACxB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AAGE,UAAMC,OAAO,GAAG;AACdC,MAAAA,MAAM,EAAE,MADM;AAEdC,MAAAA,WAAW,EAAE,SAFC;AAGdC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAHK;AAMdC,MAAAA,IAAI,EAAG,YAAWN,QAAS,WAAUC,QAAS;AANhC,KAAhB;AASAM,IAAAA,KAAK,CAACC,GAAG,GAAC,QAAL,EAAeN,OAAf,CAAL,CACCO,IADD,CACMC,QAAQ,IAAI;AAChB,UAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,YAAID,QAAQ,CAACE,MAAT,KAAoB,GAAxB,EAA6B;AAC3BC,UAAAA,KAAK,CAAC,8BAAD,CAAL;AACD;;AACD,YAAIH,QAAQ,CAACE,MAAT,KAAoB,GAAxB,EAA6B;AAC3BC,UAAAA,KAAK,CAAC,qBAAD,CAAL;AAED;AACF;;AACD,aAAOH,QAAP;AACD,KAZD,EAaCD,IAbD,CAaMC,QAAQ,IAAIA,QAAQ,CAACI,IAAT,EAblB,EAcCL,IAdD,CAcMM,IAAI,IAAI;AACZ,UAAIA,IAAI,CAACC,OAAT,EAAkB;AAEhBpB,QAAAA,OAAO,CAACqB,GAAR,CAAY,UAAZ,EAAwB,IAAxB,EAA8B;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAA9B;AAEA,eAAOH,IAAI,CAACC,OAAL,CAAaG,IAAb,EAAP;AAED;AACF,KAtBD;AAwBD;;AAIDC,EAAAA,MAAM,GAAG;AACPC,IAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACD;;AAEDC,EAAAA,QAAQ,CAACvB,QAAD,EAAWwB,KAAX,EAAkBvB,QAAlB,EAA4B;AAClC,WAAON,KAAK,CAAC8B,IAAN,CAAW5B,OAAO,GAAG,QAArB,EAA+B;AACpCG,MAAAA,QADoC;AAEpCwB,MAAAA,KAFoC;AAGpCvB,MAAAA;AAHoC,KAA/B,CAAP;AAKD;;AA5DiB;;AA+DlB,eAAe,IAAIH,WAAJ,EAAf","sourcesContent":["import axios from \"axios\";\nimport Cookies from 'js-cookie';\n\nconst API_URL = \"http://localhost:3000\";\n\nclass AuthService {\n\n  login(username, password) {\n    /*return axios\n    .post(API_URL + \"/login\", { username, password })\n    .then((response) => {\n    if (response.data.accessToken) {\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n  }\n\n  return response.data;\n});*/\n\n  const options = {\n    method: 'post',\n    credentials: 'include',\n    headers: {\n      'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8'\n    },\n    body: `username=${username}&passwd=${password}`\n  }\n\n  fetch(url+\"/login\", options)\n  .then(response => {\n    if (!response.ok) {\n      if (response.status === 404) {\n        alert('User not found, please retry')\n      }\n      if (response.status === 401) {\n        alert('Invalid credentials')\n\n      }\n    }\n    return response\n  })\n  .then(response => response.json())\n  .then(data => {\n    if (data.success) {\n\n      Cookies.set('signedin', true, { expires: 1 });\n\n      return data.success.trim();\n\n    }\n  });\n\n}\n\n\n\nlogout() {\n  localStorage.removeItem(\"user\");\n}\n\nregister(username, email, password) {\n  return axios.post(API_URL + \"signup\", {\n    username,\n    email,\n    password,\n  });\n}\n}\n\nexport default new AuthService();\n"]},"metadata":{},"sourceType":"module"}